# Neo Block State Indexer - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# STATE RECORDER SETTINGS
# ============================================================================

# Enable/disable the state recorder (true/false)
NEO_STATE_RECORDER__ENABLED=true

# Storage provider wrapper for read recording.
# To capture storage reads without patching Neo core:
# 1. In your node config (e.g. `config.json`), set Storage.Engine:
#    "Storage": { "Engine": "RecordingStore", "Path": "Data_LevelDB_{0}" }
# 2. Optionally choose the underlying provider (default LevelDBStore):
NEO_STATE_RECORDER__BASE_STORE_PROVIDER=LevelDBStore

# Supabase Project URL (from Supabase Dashboard -> Settings -> API)
NEO_STATE_RECORDER__SUPABASE_URL=https://your-project.supabase.co

# Supabase Service Role Key (from Supabase Dashboard -> Settings -> API)
# Required for write access when using RestApi mode.
NEO_STATE_RECORDER__SUPABASE_KEY=your-service-role-key

# Supabase Storage Bucket name for binary uploads
NEO_STATE_RECORDER__SUPABASE_BUCKET=block-state

# Optional: direct PostgreSQL connection string.
# Used by tools/CreateTables and for direct Postgres upload when Supabase REST is not configured.
# Format: postgresql://user:password@host:5432/postgres
# NEO_STATE_RECORDER__SUPABASE_CONNECTION_STRING=

# Upload Mode: Binary, RestApi, or Both
# - Binary: Upload to Supabase Storage bucket as .bin files (JSON/CSV optional, see below)
# - RestApi: Upsert into Supabase Postgres via PostgREST (HTTPS)
# - Both: Upload to both Binary storage and RestApi tables
# - Postgres: Direct PostgreSQL upload using the connection string (no Supabase REST required)
NEO_STATE_RECORDER__UPLOAD_MODE=RestApi

# When true, also upload per-block JSON and CSV exports to storage.
# Default false to avoid generating millions of files on mainnet.
NEO_STATE_RECORDER__UPLOAD_AUX_FORMATS=false

# Execution trace level flags (optional)
# Controls which traces are captured when using RestApi mode.
# Values: None, Syscalls, Storage, Notifications, ContractCalls, OpCodes, All
# You can also provide comma/pipe-separated lists, e.g. "Syscalls,OpCodes".
NEO_STATE_RECORDER__TRACE_LEVEL=All

# Trace upload batch size for REST API tables (default 1000, max 5000)
NEO_STATE_RECORDER__TRACE_BATCH_SIZE=1000

# Limit concurrent trace/stat uploads to Supabase REST API.
# Default 4 to avoid 429 throttling on mainnet.
NEO_STATE_RECORDER__TRACE_UPLOAD_CONCURRENCY=4

# ============================================================================
# OPTIONAL: SUPABASE ACCESS TOKEN (for management operations)
# ============================================================================

# Supabase Access Token (from Supabase Dashboard -> Account -> Access Tokens)
# Only needed for management operations, not for data upload
SUPABASE_ACCESS_TOKEN=your-access-token

# ============================================================================
# FRONTEND SETTINGS (for frontend/.env)
# ============================================================================

# Copy these to frontend/.env:
# VITE_SUPABASE_URL=https://your-project.supabase.co
# VITE_SUPABASE_ANON_KEY=your-anon-key
# VITE_SUPABASE_BUCKET=block-state
